package com.asvcloud.meetime.common.pexip

import groovy.json.JsonSlurper

/**
 * Created by g.zw@asvcloud.com on 15/11/26.10:01
 * 昨夜西风凋碧树.独上高楼,望尽天涯路.
 * 衣带渐宽终不悔,为伊消得人憔悴.
 * 众里寻他千百度,蓦然回首,那人却在灯火阑珊处.
 */
class ParseJson_01 {
    static	main(args) {
        def jsonSlurper = new JsonSlurper()
        def object = jsonSlurper.parseText('{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 2}, "objects": [{"bandwidth": 0, "call_direction": "in", "call_uuid": "413fbc2a-c433-4849-bce0-e205ca6ddcd2", "conference": "70008", "connect_time": "2015-11-25T16:13:19.853978", "destination_alias": "70008", "display_name": "dfdf", "encryption": "On", "has_media": false, "id": "413fbc2a-c433-4849-bce0-e205ca6ddcd2", "is_muted": false, "is_on_hold": false, "is_presentation_supported": false, "is_presenting": false, "is_streaming": false, "license_count": 0, "media_node": "192.168.1.116", "parent_id": "", "participant_alias": "Infinity_Connect_192.168.1.108", "protocol": "WebRTC", "remote_address": "192.168.1.108", "remote_port": 61536, "resource_uri": "/api/admin/status/v1/participant/413fbc2a-c433-4849-bce0-e205ca6ddcd2/", "role": "guest", "service_tag": "", "service_type": "waiting_room", "signalling_node": "192.168.1.116", "source_alias": "Infinity_Connect_192.168.1.108", "system_location": "pexip-node-1", "vendor": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36"}, {"bandwidth": 0, "call_direction": "in", "call_uuid": "8a76986c-da27-4b6f-8bef-e0b7ee18047a", "conference": "70008", "connect_time": "2015-11-25T16:14:23.827287", "destination_alias": "70008", "display_name": "dfdf", "encryption": "On", "has_media": true, "id": "8a76986c-da27-4b6f-8bef-e0b7ee18047a", "is_muted": false, "is_on_hold": false, "is_presentation_supported": true, "is_presenting": false, "is_streaming": false, "license_count": 1, "media_node": "192.168.1.116", "parent_id": "413fbc2a-c433-4849-bce0-e205ca6ddcd2", "participant_alias": "Infinity_Connect_Media_192.168.1.108", "protocol": "WebRTC", "remote_address": "192.168.1.108", "remote_port": 61536, "resource_uri": "/api/admin/status/v1/participant/8a76986c-da27-4b6f-8bef-e0b7ee18047a/", "role": "guest", "service_tag": "", "service_type": "invalid_license_screen", "signalling_node": "192.168.1.116", "source_alias": "Infinity_Connect_Media_192.168.1.108", "system_location": "pexip-node-1", "vendor": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36"}]}')
        assert object instanceof Map
        println(object.objects[0].role)
    }

    def Map testjson(String text){
        def jsonSlurper = new JsonSlurper()
        def object = jsonSlurper.parseText('{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 2}, "objects": [{"bandwidth": 0, "call_direction": "in", "call_uuid": "413fbc2a-c433-4849-bce0-e205ca6ddcd2", "conference": "70008", "connect_time": "2015-11-25T16:13:19.853978", "destination_alias": "70008", "display_name": "dfdf", "encryption": "On", "has_media": false, "id": "413fbc2a-c433-4849-bce0-e205ca6ddcd2", "is_muted": false, "is_on_hold": false, "is_presentation_supported": false, "is_presenting": false, "is_streaming": false, "license_count": 0, "media_node": "192.168.1.116", "parent_id": "", "participant_alias": "Infinity_Connect_192.168.1.108", "protocol": "WebRTC", "remote_address": "192.168.1.108", "remote_port": 61536, "resource_uri": "/api/admin/status/v1/participant/413fbc2a-c433-4849-bce0-e205ca6ddcd2/", "role": "guest", "service_tag": "", "service_type": "waiting_room", "signalling_node": "192.168.1.116", "source_alias": "Infinity_Connect_192.168.1.108", "system_location": "pexip-node-1", "vendor": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36"}, {"bandwidth": 0, "call_direction": "in", "call_uuid": "8a76986c-da27-4b6f-8bef-e0b7ee18047a", "conference": "70008", "connect_time": "2015-11-25T16:14:23.827287", "destination_alias": "70008", "display_name": "dfdf", "encryption": "On", "has_media": true, "id": "8a76986c-da27-4b6f-8bef-e0b7ee18047a", "is_muted": false, "is_on_hold": false, "is_presentation_supported": true, "is_presenting": false, "is_streaming": false, "license_count": 1, "media_node": "192.168.1.116", "parent_id": "413fbc2a-c433-4849-bce0-e205ca6ddcd2", "participant_alias": "Infinity_Connect_Media_192.168.1.108", "protocol": "WebRTC", "remote_address": "192.168.1.108", "remote_port": 61536, "resource_uri": "/api/admin/status/v1/participant/8a76986c-da27-4b6f-8bef-e0b7ee18047a/", "role": "guest", "service_tag": "", "service_type": "invalid_license_screen", "signalling_node": "192.168.1.116", "source_alias": "Infinity_Connect_Media_192.168.1.108", "system_location": "pexip-node-1", "vendor": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.86 Safari/537.36"}]}')
        return object
    }
}